<div [@routerTransition]>
    <!--<app-page-header [heading]="'Users'" [icon]="'fa-table'"></app-page-header>-->
    <div class="row">
        <div class="col col-xl-12 col-lg-12">
            <div class="card mb-3">
                <div class="card-header">
					<div class="row">
						<div class="col col-xl-4 col-lg-4">
							<h4>CENTER FEEDBACK</h4>
						</div>
						<div class="col">
							<button (click)="open(addmodal_gobal, null)" class="btn btn-sm btn-primary float-right" type="button"><i class="fa fa-plus-square" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Add Feedback</button>

							<!-- Modal starts from here -->
							<ng-template #addmodal_gobal let-c="close" let-d="dismiss">
								<form role="form" [formGroup]="add_globalCenterfeedbackFormGroup" (ngSubmit)="add_globalFormSubmitAction()">
									<div class="modal-body">
										<div class="row">
											<div class="col col-xl-4 col-lg-4">Feedback Desc.</div>
											<div class="col col-xl-8 col-lg-8 row-fluid">
												<input value="{{ add_globalmodal_centerfeedback_desc }}" formControlName="add_globalmodal_centerfeedback_desc" [(ngModel)]="add_globalmodal_centerfeedback_desc" type="text" placeholder="Description" class="modal_textbox">
												<div class="validation-error-message"  *ngIf="add_globalCenterfeedbackFormGroup.controls.add_globalmodal_centerfeedback_desc.invalid">Description required</div>
											</div>
										</div>
										<div class="row">
											<div class="col col-xl-4 col-lg-4">Type</div>
											<div class="col col-xl-8 col-lg-8 row-fluid">
												<select value="{{selected_type}}" (change)="type_onchange($event)" class="form-control" placeholder="Type">
													<option value="select">select</option>
													<option value="calendar">calendar</option>
													<option value="input">input</option>
												</select>
											</div>
										</div>
										<br>
										<div class="row" *ngIf="isSelectType">
											<div class="col col-xl-4 col-lg-4">Selection mode</div>
											<div class="col col-xl-8 col-lg-8 row-fluid">
												<div class="row">
													<div class="col col-xl-6 col-lg-6">
														<input type="radio" name="mode" value="single" (change)="selectmode_on_change($event.target.value)" checked /> Single
													</div>
													<div class="col col-xl-6 col-lg-6">
														<input type="radio" name="mode" value="multiple" (change)="selectmode_on_change($event.target.value)" /> Multiple
													</div>
												</div>
											</div>
										</div>
										<br>
										<div class="row" *ngIf="isSelectType">
											<div class="col col-xl-4 col-lg-4">Options</div>
											<div class="col col-xl-8 col-lg-8 row-fluid">
												<input value="{{ optionval }}" (input)="txt_add_options_change($event.target.value)" type="text" placeholder="Options" class="modal_textbox1">
												<button type="button" (click)="add_option_clicked()" class="btn btn-primary"><i class="fa fa-plus" aria-hidden="true"></i></button>
											</div>
										</div>
										<br>
										<div *ngIf="isSelectType">
											<div class="row" *ngFor="let opt of all_options_arr; let i = index;">
												<div class="col col-xl-2 col-lg-2">{{i+1}}</div>
												<div class="col col-xl-7 col-lg-7">{{opt}}</div>
												<div class="col col-xl-3 col-lg-3"><button type="button" (click)="delete_option_clicked(i)" class="btn btn-danger btn-sm"><i class="fa fa-times" aria-hidden="true"></i></button></div>
											</div><br>
										</div>


									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-default" (click)="c('Close click')">Cancel</button>
										<button [disabled]="!add_globalCenterfeedbackFormGroup.valid" type="submit" class="btn btn-primary">&nbsp;&nbsp;&nbsp;Add&nbsp;&nbsp;&nbsp;</button>
									</div>
								</form>
							</ng-template>
						</div>
					</div>
                </div>

                <!-- content displayed here -->
                <div class="card-body table-responsive">
					<div id="loading_indicator" class="loading_indicator" [hidden]="hideLoading_indicator" >
						<span class=""><img src="assets/images/loader3.gif" alt="Loading. Please wait..." ></span>
					</div>
                    <table class="table table-striped" [mfData]="data" #mf="mfDataTable" [mfRowsOnPage]="4">
					  <thead>
					  <tr>
						  <th style="width: 75%">
							  <mfDefaultSorter by="question">Description</mfDefaultSorter>
						  </th>
						  <th style="width: 25%">
							  Action
						  </th>
					  </tr>
					  </thead>
					  <tbody>
					  <tr *ngFor="let feedback of mf.data; let i = index" id="{{ 'tr' + i }}" [attr.data-index]="i">
						  <td><span class="bold-font">{{feedback.feedback}}</span></td>
						  <td>
								<div class="row">
									<div class="col col-xl-4 col-lg-4">
										<!-- edit button datatable -->
										<button type="button" class="btn btn-primary input-block-level form-control" (click)="open(editmodal,feedback)"><i class="fa fa-pencil" aria-hidden="true"></i></button>
									</div>
									<div class="col col-xl-4 col-lg-4">
										<!-- delete button datatable -->
										<button type="button" class="btn btn-danger input-block-level form-control" (click)="open(deletemodal,feedback)"><i class="fa fa-trash" aria-hidden="true"></i></button>
									</div>
								</div>

							<!-- global button add modal starts from here -->


							<!-- edit modal starts from here -->
							<ng-template #editmodal let-c="close" let-d="dismiss">
								<form role="form" [formGroup]="editCenterfeedbackFormGroup" (ngSubmit)="editFormSubmitAction(feedback._id)">
									<div class="modal-body">
										<div class="row">
											<div class="col col-xl-4 col-lg-4">Feedback Desc.</div>
											<div class="col col-xl-8 col-lg-8 row-fluid">
												<input value="{{ editmodal_centerfeedback_desc }}" formControlName="editmodal_centerfeedback_desc" [(ngModel)]="editmodal_centerfeedback_desc" type="text" placeholder="Description" class="modal_textbox">
												<div class="validation-error-message"  *ngIf="editCenterfeedbackFormGroup.controls.editmodal_centerfeedback_desc.invalid">
													Description required
												</div>
											</div>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-default" (click)="c('Close click')">Cancel</button>
										<button [disabled]="!editCenterfeedbackFormGroup.valid" type="submit" class="btn btn-primary">&nbsp;&nbsp;&nbsp;UPDATE&nbsp;&nbsp;&nbsp;</button>
									</div>
								</form>
							</ng-template>

							<!-- Delete Modal starts from here -->
							<ng-template #deletemodal let-c="close" let-d="dismiss">
								<form role="form" (ngSubmit)="deleteFormSubmitAction(feedback._id)">
									<div class="modal-body">
										<div class="row">
										<img src="assets/images/warning.png" class="warning-icon">
										<span class="col col-xl-9 col-lg-9">Are you sure, you want to remove records  !</span>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-default" (click)="c('Close click')">Cancel</button>
										<button type="submit" class="btn btn-danger">&nbsp;&nbsp;&nbsp;Delete&nbsp;&nbsp;&nbsp;</button>
									</div>
								</form>
							</ng-template>
						  </td>
					  </tr>
					  </tbody>
					  <tfoot>
					  <tr>
						  <td colspan="4">
							  <!--<mfBootstrapPaginator [rowsOnPageSet]="[5,10,25]"></mfBootstrapPaginator>-->
							  <mfBootstrapPaginator></mfBootstrapPaginator>
						  </td>
					  </tr>
					  </tfoot>
					</table>
                </div>
            </div>
        </div>
    </div>
</div>
